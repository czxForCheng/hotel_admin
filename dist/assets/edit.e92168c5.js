import{_ as Z}from"./index.7fbf7ca8.js";import{P as X,I as Y,B as ee,C as le,x as ue,L as ae,Q as te,R as oe,F as ne,M as de,G as me,H as re,Z as se,y as be,D as ie,w as pe}from"./element-plus.0777841c.js";import{u as Fe,a as ce}from"./vue-router.12d45bc3.js";import{t as _e,d as ge,a as fe,g as Ve}from"./code.888adabc.js";import{d as Be}from"./dict.969ddd02.js";import{e as Ee,f as q}from"./index.0be731c2.js";import{m as ve}from"./menu.30ecc9e9.js";import{u as Ne}from"./useDictOptions.33cfaf4e.js";import{d as x,r as y,$ as R,s as Ce,o as m,c as F,U as l,L as u,a as s,V as c,a7 as f,u as A,K as _,R as $,S as V}from"./@vue.e8706010.js";import"./@vueuse.fc17487b.js";import"./@element-plus.196c7323.js";import"./lodash-es.29c53eac.js";import"./dayjs.771f24d4.js";import"./axios.c369f2ff.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.d13b4135.js";import"./pinia.dfca86b4.js";import"./vue-demi.ebc8116b.js";import"./css-color-function.66a64c42.js";import"./color.bf494a29.js";import"./clone.7f7b5050.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.cffdefa4.js";import"./ms.a9ae1d6d.js";import"./nprogress.6c190664.js";import"./vue-clipboard3.94e9f0b6.js";import"./clipboard.36db0eb4.js";import"./echarts.234b3572.js";import"./zrender.8ee1a698.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.2cdc8407.js";const De={class:"code-edit"},Te={class:"w-80"},ye={class:"w-80"},Ae={class:"w-80"},Ue={class:"w-80"},he={class:"w-80"},ke=V("\u5355\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09"),we=V("\u6811\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09"),Pe={class:"w-80"},qe=s("div",{class:"form-tips"},"\u751F\u6210\u6587\u4EF6\u6240\u5728\u6A21\u5757\u540D",-1),Re={class:"w-80"},$e=V("\u538B\u7F29\u5305\u4E0B\u8F7D"),xe=V("\u81EA\u5B9A\u4E49\u8DEF\u5F84"),Le=s("div",{class:"form-tips"},"\u538B\u7E2E\u5305\u4E0B\u8F7D\u65B9\u5F0F\u6682\u4E0D\u652F\u6301\u81EA\u52A8\u6784\u5EFA\u83DC\u5355\u6743\u9650",-1),Se=V("\u81EA\u52A8\u6784\u5EFA"),Ie=V("\u624B\u52A8\u6DFB\u52A0"),je=s("div",{class:"form-tips"}," \u81EA\u52A8\u6784\u5EFA\uFF1A\u81EA\u52A8\u6267\u884C\u751F\u6210\u83DC\u5355sql\u3002 \u624B\u52A8\u6DFB\u52A0\uFF1A\u81EA\u884C\u6DFB\u52A0\u83DC\u5355 ",-1),Ge={class:"w-80"},Oe={class:"w-80"},Qe=V("\u4FDD\u5B58"),Ke=x({name:"tableEdit"}),kl=x({...Ke,setup(He){const L=Fe(),S=ce(),{removeTab:I}=Ee(),U=y("column"),a=R({base:{id:"",tableName:"",tableComment:"",entityName:"",authorName:"",remarks:""},column:[],gen:{functionName:"",genPath:"",genTpl:"",genType:0,moduleName:"",subTableFk:"",subTableName:"",subTableFr:"",treeParent:"",treePrimary:"",treeName:"",menuName:"",menuStatus:0,menuPid:0}}),h=Ce(),k=R({["base.tableName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",trigger:"blur"}],["base.tableComment"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",trigger:"blur"}],["base.entityName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B9E\u4F53\u7C7B\u540D\u79F0",trigger:"blur"}],["base.authorName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F5C\u8005",trigger:"blur"}],["gen.moduleName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u6A21\u5757\u540D",trigger:"blur"}],["gen.functionName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u529F\u80FD\u540D\u79F0",trigger:"blur"}],["gen.treePrimary"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u4E3B\u952E\u5B57\u6BB5",trigger:"blur"}],["gen.treeParent"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u7236\u7EA7\u5B57\u6BB5",trigger:"blur"}],["gen.treeName"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u540D\u79F0\u5B57\u6BB5",trigger:"blur"}]}),j=async()=>{const i=await _e({id:L.query.id});Object.keys(a).forEach(t=>{a[t]=i[t]}),P()},{optionsData:C}=Ne({dictType:{api:Be},menu:{api:ve,transformData(i){const t={id:0,menuName:"\u9876\u7EA7",children:[]};return t.children=i,[t]}},dataTable:{api:ge}}),D=y(!1),w=y([]),P=async()=>{D.value=!0;const i=await fe({tableName:a.gen.subTableName});D.value=!1,w.value=i},G=()=>{a.gen.subTableFk="",P()},O=async()=>{var i,t;try{await((i=h.value)==null?void 0:i.validate());const{base:B,column:g,gen:r}=a;await Ve({...B,...r,column:g}),q.msgSuccess("\u64CD\u4F5C\u6210\u529F"),I(),S.back()}catch(B){for(const g in B)Object.keys(k).includes(g)&&q.msgError((t=B[g][0])==null?void 0:t.message)}};return j(),(i,t)=>{const B=X,g=Y,r=ee,d=le,N=ue,b=ae,o=te,p=oe,v=ne,Q=de,E=me,T=re,K=se,H=be,J=ie,M=pe,W=Z;return m(),F("div",De,[l(g,{class:"!border-none",shadow:"never"},{default:u(()=>[l(B,{content:"\u7F16\u8F91\u6570\u636E\u8868",onBack:t[0]||(t[0]=e=>i.$router.back())})]),_:1}),l(g,{class:"mt-4 !border-none",shadow:"never"},{default:u(()=>[l(J,{ref_key:"formRef",ref:h,class:"ls-form",model:a,"label-width":"130px",rules:k},{default:u(()=>[l(H,{modelValue:U.value,"onUpdate:modelValue":t[20]||(t[20]=e=>U.value=e)},{default:u(()=>[l(N,{label:"\u57FA\u7840\u4FE1\u606F",name:"base"},{default:u(()=>[l(d,{label:"\u8868\u540D\u79F0",prop:"base.tableName"},{default:u(()=>[s("div",Te,[l(r,{modelValue:a.base.tableName,"onUpdate:modelValue":t[1]||(t[1]=e=>a.base.tableName=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),l(d,{label:"\u8868\u63CF\u8FF0",prop:"base.tableComment"},{default:u(()=>[s("div",ye,[l(r,{modelValue:a.base.tableComment,"onUpdate:modelValue":t[2]||(t[2]=e=>a.base.tableComment=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",clearable:""},null,8,["modelValue"])])]),_:1}),l(d,{label:"\u5B9E\u4F53\u7C7B\u540D\u79F0",prop:"base.entityName"},{default:u(()=>[s("div",Ae,[l(r,{modelValue:a.base.entityName,"onUpdate:modelValue":t[3]||(t[3]=e=>a.base.entityName=e),placeholder:"\u8BF7\u8F93\u5165\u5B9E\u4F53\u7C7B\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),l(d,{label:"\u4F5C\u8005",prop:"base.authorName"},{default:u(()=>[s("div",Ue,[l(r,{modelValue:a.base.authorName,"onUpdate:modelValue":t[4]||(t[4]=e=>a.base.authorName=e),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005",clearable:""},null,8,["modelValue"])])]),_:1}),l(d,{label:"\u5907\u6CE8"},{default:u(()=>[s("div",he,[l(r,{modelValue:a.base.remarks,"onUpdate:modelValue":t[5]||(t[5]=e=>a.base.remarks=e),class:"w-full",type:"textarea",autosize:{minRows:4,maxRows:4},maxlength:"200","show-word-limit":"",clearable:""},null,8,["modelValue"])])]),_:1})]),_:1}),l(N,{label:"\u5B57\u6BB5\u7BA1\u7406",name:"column"},{default:u(()=>[l(Q,{data:a.column},{default:u(()=>[l(b,{label:"\u5B57\u6BB5\u5217\u540D",prop:"columnName"}),l(b,{label:"\u5B57\u6BB5\u63CF\u8FF0",prop:"columnComment","min-width":"120"},{default:u(({row:e})=>[l(r,{modelValue:e.columnComment,"onUpdate:modelValue":n=>e.columnComment=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(b,{label:"\u7269\u7406\u7C7B\u578B",prop:"columnType","min-width":"100"}),l(b,{label:"Java\u7C7B\u578B","min-width":"100"},{default:u(({row:e})=>[l(p,{modelValue:e.javaType,"onUpdate:modelValue":n=>e.javaType=n},{default:u(()=>[l(o,{label:"Long",value:"Long"}),l(o,{label:"String",value:"String"}),l(o,{label:"Integer",value:"Integer"}),l(o,{label:"Double",value:"Double"}),l(o,{label:"BigDecimal",value:"BigDecimal"}),l(o,{label:"Date",value:"Date"}),l(o,{label:"Boolean",value:"Boolean"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),l(b,{label:"Java\u5C5E\u6027","min-width":"100"},{default:u(({row:e})=>[l(r,{modelValue:e.javaField,"onUpdate:modelValue":n=>e.javaField=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(b,{label:"\u5FC5\u586B",width:"80"},{default:u(({row:e})=>[l(v,{modelValue:e.isRequired,"onUpdate:modelValue":n=>e.isRequired=n,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(b,{label:"\u63D2\u5165",width:"80"},{default:u(({row:e})=>[l(v,{modelValue:e.isInsert,"onUpdate:modelValue":n=>e.isInsert=n,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(b,{label:"\u7F16\u8F91",width:"80"},{default:u(({row:e})=>[l(v,{modelValue:e.isEdit,"onUpdate:modelValue":n=>e.isEdit=n,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(b,{label:"\u5217\u8868",width:"80"},{default:u(({row:e})=>[l(v,{modelValue:e.isList,"onUpdate:modelValue":n=>e.isList=n,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(b,{label:"\u67E5\u8BE2",width:"80"},{default:u(({row:e})=>[l(v,{modelValue:e.isQuery,"onUpdate:modelValue":n=>e.isQuery=n,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(b,{label:"\u67E5\u8BE2\u65B9\u5F0F"},{default:u(({row:e})=>[l(p,{modelValue:e.queryType,"onUpdate:modelValue":n=>e.queryType=n},{default:u(()=>[l(o,{label:"=",value:"EQ"}),l(o,{label:"!=",value:"NE"}),l(o,{label:">",value:"GT"}),l(o,{label:">=",value:"GTE"}),l(o,{label:"<",value:"LT"}),l(o,{label:"<=",value:"LTE"}),l(o,{label:"LIKE",value:"LIKE"}),l(o,{label:"BETWEEN",value:"BETWEEN"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),l(b,{label:"\u663E\u793A\u7C7B\u578B","min-width":"120"},{default:u(({row:e})=>[l(p,{modelValue:e.htmlType,"onUpdate:modelValue":n=>e.htmlType=n},{default:u(()=>[l(o,{label:"\u6587\u672C\u6846",value:"input"}),l(o,{label:"\u6570\u5B57\u6846",value:"number"}),l(o,{label:"\u6587\u672C\u57DF",value:"textarea"}),l(o,{label:"\u4E0B\u62C9\u6846",value:"select"}),l(o,{label:"\u5355\u9009\u6846",value:"radio"}),l(o,{label:"\u590D\u9009\u6846",value:"checkbox"}),l(o,{label:"\u65E5\u671F\u63A7\u4EF6",value:"datetime"}),l(o,{label:"\u56FE\u7247\u9009\u62E9\u63A7\u4EF6",value:"imageUpload"}),l(o,{label:"\u5BCC\u6587\u672C\u63A7\u4EF6",value:"editor"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),l(b,{label:"\u5B57\u5178\u7C7B\u578B","min-width":"120"},{default:u(({row:e})=>[l(p,{modelValue:e.dictType,"onUpdate:modelValue":n=>e.dictType=n,clearable:"",disabled:!(e.htmlType=="select"||e.htmlType=="radio"||e.htmlType=="checkbox"),placeholder:"\u5B57\u5178\u7C7B\u578B"},{default:u(()=>[(m(!0),F(c,null,f(A(C).dictType,(n,z)=>(m(),_(o,{key:z,label:n.dictName,value:n.dictType,disabled:!n.dictStatus},null,8,["label","value","disabled"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1})]),_:1},8,["data"])]),_:1}),l(N,{label:"\u751F\u6210\u914D\u7F6E",name:"config"},{default:u(()=>[l(d,{label:"\u6A21\u677F\u7C7B\u578B",prop:"gen.genTpl",required:""},{default:u(()=>[l(T,{modelValue:a.gen.genTpl,"onUpdate:modelValue":t[6]||(t[6]=e=>a.gen.genTpl=e)},{default:u(()=>[l(E,{label:"crud"},{default:u(()=>[ke]),_:1},8,["label"]),l(E,{label:"tree"},{default:u(()=>[we]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u6A21\u5757\u540D",prop:"gen.moduleName"},{default:u(()=>[s("div",Pe,[l(r,{modelValue:a.gen.moduleName,"onUpdate:modelValue":t[7]||(t[7]=e=>a.gen.moduleName=e),placeholder:"\u8BF7\u8F93\u5165\u6A21\u5757\u540D",clearable:""},null,8,["modelValue"]),qe])]),_:1}),l(d,{label:"\u529F\u80FD\u540D\u79F0",prop:"gen.functionName"},{default:u(()=>[s("div",Re,[l(r,{modelValue:a.gen.functionName,"onUpdate:modelValue":t[8]||(t[8]=e=>a.gen.functionName=e),placeholder:"\u8BF7\u8F93\u5165\u529F\u80FD\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),l(d,{label:"\u751F\u6210\u65B9\u5F0F",prop:"gen.genType"},{default:u(()=>[s("div",null,[l(T,{modelValue:a.gen.genType,"onUpdate:modelValue":t[9]||(t[9]=e=>a.gen.genType=e)},{default:u(()=>[l(E,{label:0},{default:u(()=>[$e]),_:1},8,["label"]),l(E,{label:1},{default:u(()=>[xe]),_:1},8,["label"])]),_:1},8,["modelValue"]),Le])]),_:1}),l(d,{label:"\u83DC\u5355\u6784\u5EFA",prop:"gen.menuStatus",required:""},{default:u(()=>[s("div",null,[l(T,{modelValue:a.gen.menuStatus,"onUpdate:modelValue":t[10]||(t[10]=e=>a.gen.menuStatus=e)},{default:u(()=>[l(E,{label:1},{default:u(()=>[Se]),_:1}),l(E,{label:0},{default:u(()=>[Ie]),_:1})]),_:1},8,["modelValue"]),je])]),_:1}),l(d,{label:"\u7236\u7EA7\u83DC\u5355",prop:"gen.menuPid"},{default:u(()=>[l(K,{class:"w-80",modelValue:a.gen.menuPid,"onUpdate:modelValue":t[11]||(t[11]=e=>a.gen.menuPid=e),data:A(C).menu,clearable:"","node-key":"id",props:{label:"menuName"},"default-expand-all":"",placeholder:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355","check-strictly":""},null,8,["modelValue","data"])]),_:1}),l(d,{label:"\u83DC\u5355\u540D\u79F0",prop:"gen.menuName"},{default:u(()=>[s("div",Ge,[l(r,{modelValue:a.gen.menuName,"onUpdate:modelValue":t[12]||(t[12]=e=>a.gen.menuName=e),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),a.gen.genType==1?(m(),_(d,{key:0,label:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",prop:"gen.genPath"},{default:u(()=>[s("div",Oe,[l(r,{modelValue:a.gen.genPath,"onUpdate:modelValue":t[13]||(t[13]=e=>a.gen.genPath=e),placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u8DEF\u5F84",clearable:""},null,8,["modelValue"])])]),_:1})):$("",!0),a.gen.genTpl=="tree"?(m(),F(c,{key:1},[l(d,{label:"\u6811\u4E3B\u952E\u5B57\u6BB5",prop:"gen.treePrimary"},{default:u(()=>[l(p,{class:"w-80",modelValue:a.gen.treePrimary,"onUpdate:modelValue":t[14]||(t[14]=e=>a.gen.treePrimary=e),clearable:""},{default:u(()=>[(m(!0),F(c,null,f(a.column,e=>(m(),_(o,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u6811\u7236\u7EA7\u5B57\u6BB5",prop:"gen.treeParent"},{default:u(()=>[l(p,{class:"w-80",modelValue:a.gen.treeParent,"onUpdate:modelValue":t[15]||(t[15]=e=>a.gen.treeParent=e),clearable:""},{default:u(()=>[(m(!0),F(c,null,f(a.column,e=>(m(),_(o,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u6811\u540D\u79F0\u5B57\u6BB5",prop:"gen.treeName"},{default:u(()=>[l(p,{class:"w-80",modelValue:a.gen.treeName,"onUpdate:modelValue":t[16]||(t[16]=e=>a.gen.treeName=e),clearable:""},{default:u(()=>[(m(!0),F(c,null,f(a.column,e=>(m(),_(o,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})],64)):$("",!0)]),_:1}),l(N,{label:"\u5173\u8054\u914D\u7F6E",name:"relation"},{default:u(()=>[l(d,{label:"\u5173\u8054\u5B50\u8868\u7684\u8868\u540D",prop:"gen.subTableName"},{default:u(()=>[l(p,{class:"w-80",modelValue:a.gen.subTableName,"onUpdate:modelValue":t[17]||(t[17]=e=>a.gen.subTableName=e),clearable:"",onChange:G},{default:u(()=>[(m(!0),F(c,null,f(A(C).dataTable,e=>(m(),_(o,{key:e.tableName,value:e.tableName,label:`${e.tableName}\uFF1A${e.tableComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u5B50\u8868\u5173\u8054\u7684\u5916\u952E\u540D ",prop:"gen.subTableFk"},{default:u(()=>[l(p,{class:"w-80",modelValue:a.gen.subTableFk,"onUpdate:modelValue":t[18]||(t[18]=e=>a.gen.subTableFk=e),clearable:"",loading:D.value},{default:u(()=>[(m(!0),F(c,null,f(w.value,e=>(m(),_(o,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),l(d,{label:"\u5173\u8054\u8868\u4E3B\u952E ",prop:"gen.subTableFr"},{default:u(()=>[l(p,{class:"w-80",modelValue:a.gen.subTableFr,"onUpdate:modelValue":t[19]||(t[19]=e=>a.gen.subTableFr=e),clearable:""},{default:u(()=>[(m(!0),F(c,null,f(a.column,e=>(m(),_(o,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model","rules"])]),_:1}),l(W,null,{default:u(()=>[l(M,{type:"primary",onClick:O},{default:u(()=>[Qe]),_:1})]),_:1})])}}});export{kl as default};
